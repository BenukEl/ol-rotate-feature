{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2911f2df402069adaf4b","webpack:///./src/index.js","webpack:///./src/RotateFeatureEvent.js","webpack:///./src/RotateFeatureInteraction.js","webpack:///./src/util.js","webpack:///external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}"],"names":["RotateFeatureEventType","START","ROTATING","END","RotateFeatureEvent","type","features","angle","anchor","propagationStopped","undefined","InteractionOptions","ANCHOR_KEY","ARROW_KEY","ANGLE_PROP","ANCHOR_PROP","RotateFeatureInteraction","options","handleEvent","handleDownEvent","handleUpEvent","handleDragEvent","handleMoveEvent","setAngle","setAnchor","features_","Collection","overlay_","layer","Vector","style","getDefaultStyle","source","previousCursor_","anchorFeature_","arrowFeature_","lastCoordinate_","anchorMoving_","on","onFeatureAdd_","onFeatureRemove_","onChangeActive_","onAngleChange_","onAnchorChange_","map","setMap","updateInteractionFeatures_","reset_","getActive","isNaN","parseFloat","set","get","Array","isArray","length","getFeaturesCentroid","getLength","createOrUpdateAnchorFeature_","createOrUpdateArrowFeature_","resetAngleAndAnchor","resetAngleAndAnchor_","forEach","feature","getSource","removeFeature","resetAngle_","resetAnchor_","getAngle","getAnchor","getGeometry","setCoordinates","Feature","geometry","geom","Point","addFeature","element","oldValue","rotate","getCoordinates","dispatchEvent","evt","foundFeature","forEachFeatureAtPixel","pixel","includes","interaction","Pointer","call","getArray","coordinate","dispatchRotateStartEvent_","dispatchRotateEndEvent_","newCoordinate","anchorCoordinate","lastVector","newVector","Math","atan2","dispatchRotatingEvent_","elem","getTargetElement","setCursor","cursor","vendor","white","blue","transparent","width","styles","Style","image","RegularShape","fill","Fill","color","stroke","Stroke","radius","points","zIndex","Infinity","text","Text","font","offsetX","offsetY","resolution","getImage","setRotation","coordinates","Polygon","setGeometry","getText","setText","round","PI","getFeaturesExtent","GeometryCollection","getExtent","extent","getCenter","assert","assertInstanceOf","noop","identity","getValueType","coalesce","condition","message","join","Error","value","arg","Function","name","Object","constructor","prototype","toString","values","find"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"openlayers\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"openlayers\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RotateFeature\"] = factory(require(\"openlayers\"));\n\telse\n\t\troot[\"ol\"] = root[\"ol\"] || {}, root[\"ol\"][\"interaction\"] = root[\"ol\"][\"interaction\"] || {}, root[\"ol\"][\"interaction\"][\"RotateFeature\"] = factory(root[\"ol\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2911f2df402069adaf4b","/**\n * Rotate interaction for OpenLayers.\n * Allows vector feature rotation.\n *\n * @author Vladimir Vershinin <ghettovoice@gmail.com>\n * @licence MIT https://opensource.org/licenses/MIT\n * @copyright (c) 2016-2017, Vladimir Vershinin\n */\nimport RotateFeatureInteraction from \"./RotateFeatureInteraction\";\n\nexport default RotateFeatureInteraction;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// @flow\n/**\n * @enum {string}\n */\nexport const RotateFeatureEventType = {\n    /**\n     * Triggered upon feature rotate start.\n     * @event RotateFeatureEvent#rotatestart\n     */\n    START: 'rotatestart',\n    /**\n     * Triggered upon feature rotation.\n     * @event RotateFeatureEvent#rotating\n     */\n    ROTATING: 'rotating',\n    /**\n     * Triggered upon feature rotation end.\n     * @event RotateFeatureEvent#rotateend\n     */\n    END: 'rotateend'\n};\n\n/**\n * Events emitted by RotateFeatureInteraction instances are instances of this type.\n *\n * @class\n * @author Vladimir Vershinin\n */\nexport class RotateFeatureEvent {\n    /**\n     * @param {RotateFeatureEventType} type Type.\n     * @param {ol.Collection<ol.Feature>} features Rotated features.\n     * @param {number} angle Angle in radians.\n     * @param {ol.Coordinate} anchor Anchor position.\n     */\n    constructor(type, features, angle, anchor) {\n        /**\n         * @type {boolean}\n         */\n        this.propagationStopped = undefined;\n\n        /**\n         * The event type.\n         * @type {RotateFeatureEventType}\n         */\n        this.type = type;\n\n        /**\n         * The features being rotated.\n         * @type {ol.Collection<ol.Feature>}\n         */\n        this.features = features;\n        /**\n         * Current angle in radians.\n         * @type {number}\n         */\n        this.angle = angle;\n        /**\n         * Current rotation anchor.\n         * @type {number[] | ol.Coordinate}\n         */\n        this.anchor = anchor;\n    }\n\n    /**\n     * Stop event propagation.\n     * @function\n     */\n    preventDefault() {\n        this.propagationStopped = true;\n    }\n\n    /**\n     * Stop event propagation.\n     * @function\n     */\n    stopPropagation() {\n        this.propagationStopped = true;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/RotateFeatureEvent.js","// @flow\nimport ol from \"openlayers\";\nimport { assert, assertInstanceOf, coalesce } from \"./util\";\nimport { RotateFeatureEvent, RotateFeatureEventType } from \"./RotateFeatureEvent\";\n\n/**\n * @typedef {Object} InteractionOptions\n * @property {ol.Collection<ol.Feature>} features The features the interaction works on. Required.\n * @property {ol.style.Style | Array<ol.style.Style> | ol.style.StyleFunction | undefined} style  Style of the overlay.\n * @property {number | undefined} angle Initial angle in radians (positive is counter-clockwise),\n *                                      applied for features already added to collection. Default is `0`.\n * @property {number[] | ol.Coordinate | undefined} anchor Initial anchor coordinate. Default is center of features extent.\n */\nvar InteractionOptions;\n\nconst ANCHOR_KEY = 'anchor';\nconst ARROW_KEY = 'arrow';\n// const GHOST_KEY = 'ghost';\n\nconst ANGLE_PROP = 'angle';\nconst ANCHOR_PROP = 'anchor';\n\n/**\n * todo добавить опцию condition - для возможности переопределения клавиш\n *\n * Rotate interaction class.\n * Adds controls to rotate vector features.\n * Writes out total angle in radians (positive is counter-clockwise) to property for each feature.\n *\n * @author Vladimir Vershinin\n */\nexport default class RotateFeatureInteraction extends ol.interaction.Pointer {\n    /**\n     * @param {InteractionOptions} options\n     */\n    constructor(options : InteractionOptions = {}) {\n        super({\n            handleEvent: RotateFeatureInteraction.handleEvent,\n            handleDownEvent: handleDownEvent,\n            handleUpEvent: handleUpEvent,\n            handleDragEvent: handleDragEvent,\n            handleMoveEvent: handleMoveEvent\n        });\n\n        if (options.angle != null) {\n            this.setAngle(options.angle);\n        }\n\n        if (options.anchor != null) {\n            this.setAnchor(options.anchor);\n        }\n\n        /**\n         * @type {ol.Collection.<ol.Feature>}\n         * @private\n         */\n        this.features_ = options.features;\n\n        assertInstanceOf(this.features_, ol.Collection);\n\n        /**\n         * @type {ol.layer.Vector}\n         * @private\n         */\n        this.overlay_ = new ol.layer.Vector({\n            style: options.style || getDefaultStyle(),\n            source: new ol.source.Vector({\n                features: new ol.Collection()\n            })\n        });\n        /**\n         * @type {string}\n         * @private\n         */\n        this.previousCursor_ = undefined;\n//        /**\n//         * Rotated feature.\n//         *\n//         * @type {ol.Feature}\n//         * @private\n//         */\n//        this.ghostFeature_ = undefined;\n        /**\n         * @type {ol.Feature}\n         * @private\n         */\n        this.anchorFeature_ = undefined;\n        /**\n         * @type {ol.Feature}\n         * @private\n         */\n        this.arrowFeature_ = undefined;\n        /**\n         * @type {ol.Coordinate}\n         * @private\n         */\n        this.lastCoordinate_ = undefined;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.anchorMoving_ = false;\n\n        this.features_.on('add', this.onFeatureAdd_, this);\n        this.features_.on('remove', this.onFeatureRemove_, this);\n\n        this.on('change:active', this.onChangeActive_, this);\n        this.on('change:' + ANGLE_PROP, this.onAngleChange_, this);\n        this.on('change:' + ANCHOR_PROP, this.onAnchorChange_, this);\n    }\n\n    /**\n     * @param {ol.MapBrowserEvent} evt Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {RotateFeatureInteraction}\n     * @public\n     */\n    static handleEvent(evt : ol.MapBrowserEvent) : boolean {\n        // disable selection of inner features\n        const foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, feature => feature);\n        if (\n            [ 'click', 'singleclick' ].includes(evt.type) &&\n            foundFeature && [this.anchorFeature_, this.arrowFeature_].includes(foundFeature)\n        ) {\n            return false;\n        }\n\n        return ol.interaction.Pointer.handleEvent.call(this, evt);\n    }\n\n    //noinspection JSUnusedGlobalSymbols\n    /**\n     * @param {ol.Map} map\n     */\n    setMap(map) {\n        this.overlay_.setMap(map);\n        super.setMap(map);\n\n        if (map) {\n            this.updateInteractionFeatures_();\n        } else {\n            this.reset_(true);\n        }\n    }\n\n    /**\n     * @private\n     */\n    onChangeActive_() {\n        if (this.getActive()) {\n            this.updateInteractionFeatures_();\n        } else {\n            this.reset_(true);\n        }\n    }\n\n    /**\n     * Set current angle of interaction features.\n     *\n     * @param {number} angle\n     */\n    setAngle(angle : number) {\n        assert(!isNaN(parseFloat(angle)), 'Numeric value passed');\n\n        this.set(ANGLE_PROP, parseFloat(angle));\n    }\n\n    /**\n     * Returns current angle of interaction features.\n     *\n     * @return {number}\n     */\n    getAngle() : number {\n        return coalesce(this.get(ANGLE_PROP), 0);\n    }\n\n    /**\n     * Set current anchor position.\n     *\n     * @param {number[] | ol.Coordinate | undefined} anchor\n     */\n    setAnchor(anchor? : ol.Coordinate) {\n        assert(anchor == null || Array.isArray(anchor) && anchor.length === 2, 'Array of two elements passed');\n        this.set(ANCHOR_PROP, anchor != null ? anchor.map(parseFloat) : undefined);\n    }\n\n    /**\n     * Returns current anchor position.\n     *\n     * @return {number[] | ol.Coordinate | undefined}\n     */\n    getAnchor() : ol.Coordinate {\n        return coalesce(this.get(ANCHOR_PROP), getFeaturesCentroid(this.features_));\n    }\n\n    /**\n     * Creates or updates all interaction helper features.\n     * @private\n     */\n    updateInteractionFeatures_() {\n        if (!this.features_.getLength()) {\n            this.reset_();\n\n            return;\n        }\n\n        this.createOrUpdateAnchorFeature_();\n        this.createOrUpdateArrowFeature_();\n    }\n\n    /**\n     * @param {boolean} [resetAngleAndAnchor]\n     * @private\n     */\n    reset_(resetAngleAndAnchor = false) {\n        if (resetAngleAndAnchor) {\n            this.resetAngleAndAnchor_();\n        }\n\n        [this.anchorFeature_, this.arrowFeature_].forEach(feature => {\n            if (feature) {\n                this.overlay_.getSource().removeFeature(feature);\n            }\n        });\n\n        this.anchorFeature_ = this.arrowFeature_ =\n            this.lastCoordinate_ = undefined;\n        this.anchorMoving_ = false;\n    }\n\n    /**\n     * @private\n     */\n    resetAngleAndAnchor_() {\n        this.resetAngle_();\n        this.resetAnchor_();\n    }\n\n    /**\n     * @private\n     */\n    resetAngle_() {\n        this.set(ANGLE_PROP, 0, true);\n        this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle());\n        this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle());\n    }\n\n    /**\n     * @private\n     */\n    resetAnchor_() {\n        this.set(ANCHOR_PROP, getFeaturesCentroid(this.features_), true);\n\n        if (this.getAnchor()) {\n            this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor());\n            this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor());\n        }\n    }\n\n    /**\n     * @private\n     */\n    createOrUpdateAnchorFeature_() {\n        const angle = this.getAngle();\n        const anchor = this.getAnchor();\n\n        if (this.anchorFeature_) {\n            this.anchorFeature_.getGeometry().setCoordinates(anchor);\n        } else {\n            this.anchorFeature_ = new ol.Feature({\n                geometry: new ol.geom.Point(anchor),\n                [ANCHOR_KEY]: true,\n                [ANGLE_PROP]: angle\n            });\n            this.overlay_.getSource().addFeature(this.anchorFeature_);\n        }\n    }\n\n//    /**\n//     * @private\n//     */\n//    createOrUpdateGhostFeature_() {\n//        if (this.ghostFeature_) {\n//            this.ghostFeature_.getGeometry().setGeometries(geometries);\n//        } else {\n//            this.ghostFeature_ = new ol.Feature({\n//                geometry: new ol.geom.GeometryCollection(geometries),\n//                [GHOST_KEY]: true\n//            });\n//            this.overlay_.addFeature(this.ghostFeature_);\n//        }\n//    }\n\n    /**\n     * @private\n     */\n    createOrUpdateArrowFeature_() {\n        const angle = this.getAngle();\n        const anchor = this.getAnchor();\n\n        if (this.arrowFeature_) {\n            this.arrowFeature_.getGeometry().setCoordinates(anchor);\n        } else {\n            this.arrowFeature_ = new ol.Feature({\n                geometry: new ol.geom.Point(anchor),\n                [ARROW_KEY]: true,\n                [ANGLE_PROP]: angle\n            });\n            this.overlay_.getSource().addFeature(this.arrowFeature_);\n        }\n    }\n\n    /**\n     * @param {ol.Feature} element\n     * @private\n     */\n    onFeatureAdd_({ element }) {\n        if (!this.getActive()) {\n            return;\n        }\n\n        assertInstanceOf(element, ol.Feature);\n\n        this.resetAngleAndAnchor_();\n        this.updateInteractionFeatures_();\n    }\n\n    /**\n     * @param {ol.Feature} element\n     * @private\n     */\n    onFeatureRemove_({ element }) {\n        if (!this.getActive()) {\n            return;\n        }\n\n        assertInstanceOf(element, ol.Feature);\n\n        this.resetAngleAndAnchor_();\n        this.updateInteractionFeatures_();\n    }\n\n    /**\n     * @private\n     */\n    onAngleChange_({ oldValue }) {\n        this.features_.forEach(feature => feature.getGeometry().rotate(this.getAngle() - oldValue, this.anchorFeature_.getGeometry().getCoordinates()));\n        this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle());\n        this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle());\n    }\n\n    /**\n     * @private\n     */\n    onAnchorChange_() {\n        const anchor = this.getAnchor();\n\n        if (anchor) {\n            this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(anchor);\n            this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(anchor);\n        }\n    }\n\n    /**\n     * @param {ol.Collection<ol.Feature>} features\n     * @private\n     */\n    dispatchRotateStartEvent_(features) {\n        this.dispatchEvent(\n            new RotateFeatureEvent(\n                RotateFeatureEventType.START,\n                features,\n                this.getAngle(),\n                this.getAnchor()\n            )\n        );\n    }\n\n    /**\n     * @param {ol.Collection<ol.Feature>} features\n     * @private\n     */\n    dispatchRotatingEvent_(features) {\n        this.dispatchEvent(\n            new RotateFeatureEvent(\n                RotateFeatureEventType.ROTATING,\n                features,\n                this.getAngle(),\n                this.getAnchor()\n            )\n        );\n    }\n\n    /**\n     * @param {ol.Collection<ol.Feature>} features\n     * @private\n     */\n    dispatchRotateEndEvent_(features) {\n        this.dispatchEvent(\n            new RotateFeatureEvent(\n                RotateFeatureEventType.END,\n                features,\n                this.getAngle(),\n                this.getAnchor()\n            )\n        );\n    }\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleDownEvent(evt : ol.MapBrowserEvent) : boolean\n{\n    const foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, feature => feature);\n\n    // handle click & drag on features for rotation\n    if (\n        foundFeature && !this.lastCoordinate_ &&\n        (this.features_.getArray().includes(foundFeature) || foundFeature === this.arrowFeature_)\n    ) {\n        this.lastCoordinate_ = evt.coordinate;\n\n        handleMoveEvent.call(this, evt);\n        this.dispatchRotateStartEvent_(this.features_);\n\n        return true;\n    }\n    // handle click & drag on rotation anchor feature\n    else if (foundFeature && foundFeature === this.anchorFeature_) {\n        this.anchorMoving_ = true;\n        handleMoveEvent.call(this, evt);\n\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleUpEvent(evt : ol.MapBrowserEvent) : boolean\n{\n    // stop drag sequence of features\n    if (this.lastCoordinate_) {\n        this.lastCoordinate_ = undefined;\n\n        handleMoveEvent.call(this, evt);\n        this.dispatchRotateEndEvent_(this.features_);\n\n        return true;\n    }\n    // stop drag sequence of the anchors\n    else if (this.anchorMoving_) {\n        this.anchorMoving_ = false;\n        handleMoveEvent.call(this, evt);\n\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleDragEvent(evt : ol.MapBrowserEvent) : boolean\n{\n    const newCoordinate = evt.coordinate;\n    const anchorCoordinate = this.anchorFeature_.getGeometry().getCoordinates();\n\n    // handle drag of features by angle\n    if (this.lastCoordinate_) {\n        // calculate vectors of last and current pointer positions\n        const lastVector = [this.lastCoordinate_[0] - anchorCoordinate[0], this.lastCoordinate_[1] - anchorCoordinate[1]];\n        const newVector = [newCoordinate[0] - anchorCoordinate[0], newCoordinate[1] - anchorCoordinate[1]];\n\n        // calculate angle between last and current vectors (positive angle counter-clockwise)\n        let angle = Math.atan2(lastVector[0] * newVector[1] - newVector[0] * lastVector[1], lastVector[0] * newVector[0] + lastVector[1] * newVector[1]);\n\n        this.setAngle(this.getAngle() + angle);\n        this.dispatchRotatingEvent_(this.features_);\n\n        this.lastCoordinate_ = evt.coordinate;\n    }\n    // handle drag of the anchor\n    else if (this.anchorMoving_) {\n        this.setAnchor(newCoordinate);\n    }\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleMoveEvent(evt : ol.MapBrowserEvent) : boolean\n{\n    const elem = evt.map.getTargetElement();\n    const foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, feature => feature);\n\n    const setCursor = (cursor, vendor = false) => {\n        if (vendor) {\n            elem.style.cursor = '-webkit-' + cursor;\n            elem.style.cursor = '-moz-' + cursor;\n        }\n\n        elem.style.cursor = cursor;\n    };\n\n    if (this.lastCoordinate_) {\n        this.previousCursor_ = elem.style.cursor;\n        setCursor('grabbing', true);\n    } else if (foundFeature && (this.features_.getArray().includes(foundFeature) || foundFeature === this.arrowFeature_)) {\n        this.previousCursor_ = elem.style.cursor;\n        setCursor('grab', true);\n    } else if (foundFeature && foundFeature === this.anchorFeature_ || this.anchorMoving_) {\n        this.previousCursor_ = elem.style.cursor;\n        setCursor('crosshair');\n    } else {\n        setCursor(this.previousCursor_ || '');\n        this.previousCursor_ = undefined;\n    }\n}\n\n/**\n * @returns {ol.style.StyleFunction}\n * @private\n */\nfunction getDefaultStyle() : ol.style.StyleFunction\n{\n    const white = [255, 255, 255, 0.8];\n    const blue = [0, 153, 255, 0.8];\n    const transparent = [255, 255, 255, 0.01];\n    const width = 2;\n\n    const styles = {\n        [ANCHOR_KEY]: [\n            new ol.style.Style({\n                image: new ol.style.RegularShape({\n                    fill: new ol.style.Fill({\n                        color: [0, 153, 255, 0.8]\n                    }),\n                    stroke: new ol.style.Stroke({\n                        color: blue,\n                        width: 1\n                    }),\n                    radius: 4,\n                    points: 6\n                }),\n                zIndex: Infinity\n            })\n        ],\n        [ARROW_KEY]: [\n            new ol.style.Style({\n                fill: new ol.style.Fill({\n                    color: transparent\n                }),\n                stroke: new ol.style.Stroke({\n                    color: white,\n                    width: width + 2\n                }),\n                text: new ol.style.Text({\n                    font: '12px sans-serif',\n                    offsetX: 20,\n                    offsetY: -20,\n                    fill: new ol.style.Fill({\n                        color: 'blue'\n                    }),\n                    stroke: new ol.style.Stroke({\n                        color: white,\n                        width: width + 1\n                    })\n                }),\n                zIndex: Infinity\n            }),\n            new ol.style.Style({\n                fill: new ol.style.Fill({\n                    color: transparent\n                }),\n                stroke: new ol.style.Stroke({\n                    color: blue,\n                    width\n                }),\n                zIndex: Infinity\n            })\n        ]\n    };\n\n    return function (feature, resolution) {\n        var style;\n        const angle = feature.get(ANGLE_PROP) || 0;\n\n        switch (true) {\n            case feature.get(ANCHOR_KEY):\n                style = styles[ANCHOR_KEY];\n                style[0].getImage().setRotation(-angle);\n\n                return style;\n            case feature.get(ARROW_KEY):\n                style = styles[ARROW_KEY];\n\n                const coordinates = feature.getGeometry().getCoordinates();\n                // generate arrow polygon\n                const geom = new ol.geom.Polygon([\n                    [\n                        [coordinates[0], coordinates[1] - 6 * resolution],\n                        [coordinates[0] + 8 * resolution, coordinates[1] - 12 * resolution],\n                        [coordinates[0], coordinates[1] + 30 * resolution],\n                        [coordinates[0] - 8 * resolution, coordinates[1] - 12 * resolution],\n                        [coordinates[0], coordinates[1] - 6 * resolution],\n                    ]\n                ]);\n\n                // and rotate it according to current angle\n                geom.rotate(angle, coordinates);\n                style[0].setGeometry(geom);\n                style[1].setGeometry(geom);\n                style[0].getText().setText(Math.round(-angle * 180 / Math.PI) + '°');\n\n                return style;\n        }\n    };\n}\n\n/**\n * @param {ol.Collection<ol.Feature> | Array<ol.Feature>} features\n * @returns {ol.Extent | undefined}\n * @private\n */\nfunction getFeaturesExtent(features : ol.Collection<ol.Feature> | Array<ol.Feature>) : ol.Extent\n{\n    if (!features.getLength()) {\n        return undefined;\n    }\n\n    return new ol.geom.GeometryCollection(\n        ( Array.isArray(features) ? features : features.getArray() ).map(feature => feature.getGeometry())\n    ).getExtent();\n}\n\n/**\n * @param {ol.Collection<ol.Feature> | Array<ol.Feature>} features\n * @return {ol.Coordinate | undefined}\n */\nfunction getFeaturesCentroid(features : ol.Collection<ol.Feature> | Array<ol.Feature>) : ol.Coordinate\n{\n    if (!features.getLength()) {\n        return undefined;\n    }\n\n    return ol.extent.getCenter(getFeaturesExtent(features));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/RotateFeatureInteraction.js","// @flow\n/**\n * @param {boolean} condition\n * @param {string} message\n * @throws Error\n */\nexport function assert(condition:boolean, message = '') {\n    message = ['Assertion failed', message].join(': ');\n\n    if (!condition) {\n        throw new Error(message);\n    }\n}\n\n/**\n * Checks if the value is an instance of the user-defined type.\n *\n * @param {*} value\n * @param {*} type\n * @throws Error\n */\nexport function assertInstanceOf(value, type) {\n    assert(value instanceof type, `Expected instanceof ${getValueType(type)} but got ${getValueType(value)}.`);\n}\n\n/**\n * Null function. Do nothing.\n */\nexport function noop() {}\n\n/**\n * @param {*} arg\n * @returns {*}\n */\nexport function identity(arg) {\n    return arg;\n}\n\n/**\n * Returns the type of a value. If a constructor is passed, and a suitable\n * string cannot be found, 'unknown type name' will be returned.\n *\n * @param {*} value\n * @returns string\n */\nexport function getValueType(value) : string {\n    if (value instanceof Function) {\n        return value.name || 'unknown type name';\n    } else if (value instanceof Object) {\n        return value.constructor.name || Object.prototype.toString.call(value);\n    } else {\n        return value === null ? 'null' : typeof value;\n    }\n}\n\n/**\n * @param {...*} values\n * @return {*}\n */\nexport function coalesce(...values) {\n    return values.find(value => value != null);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}