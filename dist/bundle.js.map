{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 60a7bcdcdbe8dc64c9b9","webpack:///./src/index.js","webpack:///./src/index.cjs.js","webpack:///./src/rotate-feature-event.js","webpack:///./src/rotate-feature-interaction.js","webpack:///./src/util.js","webpack:///external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}"],"names":["RotateFeatureInteraction","require","default","module","exports","RotateFeatureEventType","START","ROTATING","END","RotateFeatureEvent","type","features","angle","anchor","propagationStopped_","type_","features_","angle_","anchor_","ANCHOR_KEY","ARROW_KEY","ANGLE_PROP","ANCHOR_PROP","options","handleEvent","handleDownEvent","handleUpEvent","handleDragEvent","handleMoveEvent","previousCursor_","undefined","anchorFeature_","arrowFeature_","lastCoordinate_","anchorMoving_","overlay_","style","getDefaultStyle","source","isArray","Error","setAnchor","getFeaturesCentroid","setAngle","on","onFeatureAdd_","onFeatureRemove_","onAngleChange_","onAnchorChange_","createOrUpdateAnchorFeature_","createOrUpdateArrowFeature_","map","setMap","active","assert","isNaN","parseFloat","set","get","length","getAngle","getAnchor","getGeometry","setCoordinates","geometry","getSource","addFeature","resetAngle_","resetAnchor_","resetAngleAndAnchor_","getLength","clear","oldValue","forEach","feature","rotate","dispatchEvent","getMap","setActive","getActive","evt","foundFeature","forEachFeatureAtPixel","pixel","includes","getArray","coordinate","dispatchRotateStartEvent_","dispatchRotateEndEvent_","anchorCoordinate","getCoordinates","lastVector","newVector","Math","atan2","dispatchRotatingEvent_","elem","getTargetElement","setCursor","cursor","vendor","white","blue","transparent","width","styles","image","fill","color","stroke","radius","points","zIndex","Infinity","text","font","offsetX","offsetY","resolution","getImage","setRotation","coordinates","geom","setGeometry","getText","setText","round","PI","getFeaturesExtent","getExtent","getCenter","condition","message","join","identity","arg","coalesce","args","filter","value","shift","counters","uniqId","prefix","ns","String","arr","indexOf","val","Object","prototype","toString"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"openlayers\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"openlayers\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RotateFeature\"] = factory(require(\"openlayers\"));\n\telse\n\t\troot[\"ol\"] = root[\"ol\"] || {}, root[\"ol\"][\"interaction\"] = root[\"ol\"][\"interaction\"] || {}, root[\"ol\"][\"interaction\"][\"RotateFeature\"] = factory(root[\"ol\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 60a7bcdcdbe8dc64c9b9","/**\n * Rotate interaction for OpenLayers.\n * Allows vector feature rotation.\n *\n * @author Vladimir Vershinin <ghettovoice@gmail.com>\n * @licence MIT https://opensource.org/licenses/MIT\n * @copyright (c) 2016-2017, Vladimir Vershinin\n */\nimport RotateFeature from \"./rotate-feature-interaction\"\n\nexport default RotateFeature\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * Rotate interaction for OpenLayers.\n * Allows vector feature rotation.\n *\n * @author Vladimir Vershinin <ghettovoice@gmail.com>\n * @licence MIT https://opensource.org/licenses/MIT\n * @copyright (c) 2016-2017, Vladimir Vershinin\n */\nconst RotateFeatureInteraction = require('./index').default\n\nmodule.exports = RotateFeatureInteraction\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.cjs.js","/**\n * @enum {string}\n */\nexport const RotateFeatureEventType = {\n  /**\n   * Triggered upon feature rotate start.\n   * @event RotateFeatureEvent#rotatestart\n   */\n  START: 'rotatestart',\n  /**\n   * Triggered upon feature rotation.\n   * @event RotateFeatureEvent#rotating\n   */\n  ROTATING: 'rotating',\n  /**\n   * Triggered upon feature rotation end.\n   * @event RotateFeatureEvent#rotateend\n   */\n  END: 'rotateend'\n}\n\n/**\n * Events emitted by RotateFeatureInteraction instances are instances of this type.\n *\n * @class\n * @author Vladimir Vershinin\n */\nexport default class RotateFeatureEvent {\n  /**\n   * @param {string} type Type.\n   * @param {ol.Collection<ol.Feature>} features Rotated features.\n   * @param {number} angle Angle in radians.\n   * @param {ol.Coordinate} anchor Anchor position.\n   */\n  constructor (type, features, angle, anchor) {\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.propagationStopped_ = false\n\n    /**\n     * The event type.\n     * @type {string}\n     * @private\n     */\n    this.type_ = type\n\n    /**\n     * The features being rotated.\n     * @type {ol.Collection<ol.Feature>}\n     * @private\n     */\n    this.features_ = features\n    /**\n     * Current angle in radians.\n     * @type {number}\n     * @private\n     */\n    this.angle_ = angle\n    /**\n     * Current rotation anchor.\n     * @type {ol.Coordinate}\n     * @private\n     */\n    this.anchor_ = anchor\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get propagationStopped () {\n    return this.propagationStopped_\n  }\n\n  /**\n   * @type {RotateFeatureEventType}\n   */\n  get type () {\n    return this.type_\n  }\n\n  /**\n   * @type {ol.Collection<ol.Feature>}\n   */\n  get features () {\n    return this.features_\n  }\n\n  /**\n   * @type {number}\n   */\n  get angle () {\n    return this.angle_\n  }\n\n  /**\n   * @type {ol.Coordinate}\n   */\n  get anchor () {\n    return this.anchor_\n  }\n\n  /**\n   * Prevent event propagation.\n   */\n  preventDefault () {\n    this.propagationStopped_ = true\n  }\n\n  /**\n   * Stop event propagation.\n   */\n  stopPropagation () {\n    this.propagationStopped_ = true\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/rotate-feature-event.js","/**\n * Rotate interaction class.\n * Adds controls to rotate vector features.\n * Writes out total angle in radians (positive is counter-clockwise) to property for each feature.\n */\nimport PointerInteraction from 'ol/interaction/pointer'\nimport Collection from 'ol/collection'\nimport VectorLayer from 'ol/layer/vector'\nimport VectorSource from 'ol/source/vector'\nimport Feature from 'ol/feature'\nimport Point from 'ol/geom/point'\nimport Polygon from 'ol/geom/polygon'\nimport GeometryCollection from 'ol/geom/geometrycollection'\nimport Style from 'ol/style/style'\nimport RegularShape from 'ol/style/regularshape'\nimport Stroke from 'ol/style/stroke'\nimport Fill from 'ol/style/fill'\nimport Text from 'ol/style/text'\nimport extentHelper from 'ol/extent'\nimport { assert, identity, includes, isArray } from './util'\nimport RotateFeatureEvent, { RotateFeatureEventType } from './rotate-feature-event'\n\nconst ANCHOR_KEY = 'rotate-anchor'\nconst ARROW_KEY = 'rotate-arrow'\n\nconst ANGLE_PROP = 'angle'\nconst ANCHOR_PROP = 'anchor'\n\n/**\n * @todo todo добавить опцию condition - для возможности переопределения клавиш\n */\nexport default class RotateFeatureInteraction extends PointerInteraction {\n  /**\n   * @param {InteractionOptions} options\n   */\n  constructor (options = {}) {\n    super({\n      handleEvent: handleEvent,\n      handleDownEvent: handleDownEvent,\n      handleUpEvent: handleUpEvent,\n      handleDragEvent: handleDragEvent,\n      handleMoveEvent: handleMoveEvent\n    })\n    /**\n     * @type {string}\n     * @private\n     */\n    this.previousCursor_ = undefined\n    /**\n     * @type {ol.Feature}\n     * @private\n     */\n    this.anchorFeature_ = undefined\n    /**\n     * @type {ol.Feature}\n     * @private\n     */\n    this.arrowFeature_ = undefined\n    /**\n     * @type {ol.Coordinate}\n     * @private\n     */\n    this.lastCoordinate_ = undefined\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.anchorMoving_ = false\n    /**\n     * @type {ol.layer.Vector}\n     * @private\n     */\n    this.overlay_ = new VectorLayer({\n      style: options.style || getDefaultStyle(),\n      source: new VectorSource({\n        features: new Collection()\n      })\n    })\n    /**\n     * @type {ol.Collection<ol.Feature>}\n     * @private\n     */\n    this.features_ = undefined\n    if (options.features) {\n      if (isArray(options.features)) {\n        this.features_ = new Collection(options.features)\n      } else if (options.features instanceof Collection) {\n        this.features_ = options.features\n      } else {\n        throw new Error('Features option should be an array or collection of features, ' +\n                        'got ' + (typeof options.features))\n      }\n    } else {\n      this.features_ = new Collection()\n    }\n\n    this.setAnchor(options.anchor || getFeaturesCentroid(this.features_))\n    this.setAngle(options.angle || 0)\n\n    this.features_.on('add', ::this.onFeatureAdd_)\n    this.features_.on('remove', ::this.onFeatureRemove_)\n    this.on('change:' + ANGLE_PROP, ::this.onAngleChange_)\n    this.on('change:' + ANCHOR_PROP, ::this.onAnchorChange_)\n\n    this.createOrUpdateAnchorFeature_()\n    this.createOrUpdateArrowFeature_()\n  }\n\n  /**\n   * @type {ol.Collection<ol.Feature>}\n   */\n  get features () {\n    return this.features_\n  }\n\n  /**\n   * @type {number}\n   */\n  get angle () {\n    return this.getAngle()\n  }\n\n  /**\n   * @param {number} angle\n   */\n  set angle (angle) {\n    this.setAngle(angle)\n  }\n\n  /**\n   * @type {ol.Coordinate|undefined}\n   */\n  get anchor () {\n    return this.getAnchor()\n  }\n\n  /**\n   * @param {ol.Coordinate|undefined} anchor\n   */\n  set anchor (anchor) {\n    this.setAnchor(anchor)\n  }\n\n  /**\n   * @param {ol.Map} map\n   */\n  set map (map) {\n    this.setMap(map)\n  }\n\n  /**\n   * @type {ol.Map}\n   */\n  get map() {\n    return this.getMap()\n  }\n\n  /**\n   * @param {boolean} active\n   */\n  set active (active) {\n    this.setActive(active)\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get active () {\n    return this.getActive()\n  }\n\n  /**\n   * @param {ol.Map} map\n   */\n  setMap (map) {\n    this.overlay_.setMap(map)\n    super.setMap(map)\n  }\n\n  /**\n   * @param {boolean} active\n   */\n  setActive (active) {\n    if (this.overlay_) {\n      this.overlay_.setMap(active ? this.map : undefined)\n    }\n\n    super.setActive(active)\n  }\n\n  /**\n   * Set current angle of interaction features.\n   *\n   * @param {number} angle\n   */\n  setAngle (angle) {\n    assert(!isNaN(parseFloat(angle)), 'Numeric value passed')\n\n    this.set(ANGLE_PROP, parseFloat(angle))\n  }\n\n  /**\n   * Returns current angle of interaction features.\n   *\n   * @return {number}\n   */\n  getAngle () {\n    return this.get(ANGLE_PROP)\n  }\n\n  /**\n   * Set current anchor position.\n   *\n   * @param {ol.Coordinate | undefined} anchor\n   */\n  setAnchor (anchor) {\n    assert(anchor == null || isArray(anchor) && anchor.length === 2, 'Array of two elements passed')\n\n    this.set(ANCHOR_PROP, anchor != null ? anchor.map(parseFloat) : getFeaturesCentroid(this.features_))\n  }\n\n  /**\n   * Returns current anchor position.\n   *\n   * @return {ol.Coordinate | undefined}\n   */\n  getAnchor () {\n    return this.get(ANCHOR_PROP)\n  }\n\n  /**\n   * @private\n   */\n  createOrUpdateAnchorFeature_ () {\n    const angle = this.getAngle()\n    const anchor = this.getAnchor()\n\n    if (!anchor) return\n\n    if (this.anchorFeature_) {\n      this.anchorFeature_.getGeometry().setCoordinates(anchor)\n      this.anchorFeature_.set(ANGLE_PROP, angle)\n    } else {\n      this.anchorFeature_ = new Feature({\n        geometry: new Point(anchor),\n        [ ANGLE_PROP ]: angle,\n        [ ANCHOR_KEY ]: true\n      })\n      this.overlay_.getSource().addFeature(this.anchorFeature_)\n    }\n  }\n\n  /**\n   * @private\n   */\n  createOrUpdateArrowFeature_ () {\n    const angle = this.getAngle()\n    const anchor = this.getAnchor()\n\n    if (!anchor) return\n\n    if (this.arrowFeature_) {\n      this.arrowFeature_.getGeometry().setCoordinates(anchor)\n      this.arrowFeature_.set(ANGLE_PROP, angle)\n    } else {\n      this.arrowFeature_ = new Feature({\n        geometry: new Point(anchor),\n        [ ANGLE_PROP ]: angle,\n        [ ARROW_KEY ]: true\n      })\n      this.overlay_.getSource().addFeature(this.arrowFeature_)\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetAngleAndAnchor_() {\n    this.resetAngle_();\n    this.resetAnchor_();\n  }\n\n  /**\n   * @private\n   */\n  resetAngle_() {\n    this.set(ANGLE_PROP, 0, true);\n    this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle());\n    this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle());\n  }\n\n  /**\n   * @private\n   */\n  resetAnchor_() {\n    this.set(ANCHOR_PROP, getFeaturesCentroid(this.features_), true);\n\n    if (this.getAnchor()) {\n      this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(this.getAnchor());\n      this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(this.getAnchor());\n    }\n  }\n\n  /**\n   * @private\n   */\n  onFeatureAdd_ () {\n    this.resetAngleAndAnchor_()\n    this.createOrUpdateAnchorFeature_()\n    this.createOrUpdateArrowFeature_()\n  }\n\n  /**\n   * @private\n   */\n  onFeatureRemove_ () {\n    this.resetAngleAndAnchor_()\n\n    if (this.features_.getLength()) {\n      this.createOrUpdateAnchorFeature_()\n      this.createOrUpdateArrowFeature_()\n    } else {\n      this.overlay_.getSource().clear()\n      this.anchorFeature_ = this.arrowFeature_ = undefined\n    }\n  }\n\n  /**\n   * @private\n   */\n  onAngleChange_({ oldValue }) {\n    this.features_.forEach(feature => feature.getGeometry().rotate(this.getAngle() - oldValue, this.getAnchor()))\n    this.arrowFeature_ && this.arrowFeature_.set(ANGLE_PROP, this.getAngle())\n    this.anchorFeature_ && this.anchorFeature_.set(ANGLE_PROP, this.getAngle())\n  }\n\n  /**\n   * @private\n   */\n  onAnchorChange_() {\n    const anchor = this.getAnchor()\n\n    if (anchor) {\n      this.anchorFeature_ && this.anchorFeature_.getGeometry().setCoordinates(anchor)\n      this.arrowFeature_ && this.arrowFeature_.getGeometry().setCoordinates(anchor)\n    }\n  }\n\n  /**\n   * @param {ol.Collection<ol.Feature>} features\n   * @private\n   */\n  dispatchRotateStartEvent_ (features) {\n    this.dispatchEvent(\n      new RotateFeatureEvent(\n        RotateFeatureEventType.START,\n        features,\n        this.getAngle(),\n        this.getAnchor()\n      )\n    )\n  }\n\n  /**\n   * @param {ol.Collection<ol.Feature>} features\n   * @private\n   */\n  dispatchRotatingEvent_ (features) {\n    this.dispatchEvent(\n      new RotateFeatureEvent(\n        RotateFeatureEventType.ROTATING,\n        features,\n        this.getAngle(),\n        this.getAnchor()\n      )\n    )\n  }\n\n  /**\n   * @param {ol.Collection<ol.Feature>} features\n   * @private\n   */\n  dispatchRotateEndEvent_ (features) {\n    this.dispatchEvent(\n      new RotateFeatureEvent(\n        RotateFeatureEventType.END,\n        features,\n        this.getAngle(),\n        this.getAnchor()\n      )\n    )\n  }\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleEvent (evt) {\n  // disable selection of inner features\n  const foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, identity)\n  if (\n    includes([ 'click', 'singleclick', 'dblclick' ], evt.type) &&\n    includes([ this.anchorFeature_, this.arrowFeature_ ], foundFeature)\n  ) {\n    return false\n  }\n\n  return this::PointerInteraction.handleEvent(evt)\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleDownEvent (evt) {\n  const foundFeature = evt.map.forEachFeatureAtPixel(evt.pixel, identity)\n\n  // handle click & drag on features for rotation\n  if (\n    foundFeature && !this.lastCoordinate_ &&\n    (\n      includes(this.features_.getArray(), foundFeature) ||\n      foundFeature === this.arrowFeature_\n    )\n  ) {\n    this.lastCoordinate_ = evt.coordinate\n\n    this::handleMoveEvent(evt)\n    this.dispatchRotateStartEvent_(this.features_)\n\n    return true\n  }\n  // handle click & drag on rotation anchor feature\n  else if (foundFeature && foundFeature === this.anchorFeature_) {\n    this.anchorMoving_ = true\n    this::handleMoveEvent(evt)\n\n    return true\n  }\n\n  return false\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleUpEvent (evt) {\n  // stop drag sequence of features\n  if (this.lastCoordinate_) {\n    this.lastCoordinate_ = undefined\n\n    this::handleMoveEvent(evt)\n    this.dispatchRotateEndEvent_(this.features_)\n\n    return true\n  }\n  // stop drag sequence of the anchors\n  else if (this.anchorMoving_) {\n    this.anchorMoving_ = false\n    this::handleMoveEvent(evt)\n\n    return true\n  }\n\n  return false\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleDragEvent ({ coordinate }) {\n  const anchorCoordinate = this.anchorFeature_.getGeometry().getCoordinates()\n\n  // handle drag of features by angle\n  if (this.lastCoordinate_) {\n    // calculate vectors of last and current pointer positions\n    const lastVector = [\n      this.lastCoordinate_[ 0 ] - anchorCoordinate[ 0 ],\n      this.lastCoordinate_[ 1 ] - anchorCoordinate[ 1 ]\n    ]\n    const newVector = [\n      coordinate[ 0 ] - anchorCoordinate[ 0 ],\n      coordinate[ 1 ] - anchorCoordinate[ 1 ]\n    ]\n\n    // calculate angle between last and current vectors (positive angle counter-clockwise)\n    let angle = Math.atan2(\n      lastVector[ 0 ] * newVector[ 1 ] - newVector[ 0 ] * lastVector[ 1 ],\n      lastVector[ 0 ] * newVector[ 0 ] + lastVector[ 1 ] * newVector[ 1 ]\n    )\n\n    this.setAngle(this.getAngle() + angle)\n    this.dispatchRotatingEvent_(this.features_)\n\n    this.lastCoordinate_ = coordinate\n  }\n  // handle drag of the anchor\n  else if (this.anchorMoving_) {\n    this.setAnchor(coordinate)\n  }\n}\n\n/**\n * @param {ol.MapBrowserEvent} evt Event.\n * @return {boolean}\n * @this {RotateFeatureInteraction}\n * @private\n */\nfunction handleMoveEvent ({ map, pixel }) {\n  const elem = map.getTargetElement()\n  const foundFeature = map.forEachFeatureAtPixel(pixel, identity)\n\n  const setCursor = (cursor, vendor = false) => {\n    if (vendor) {\n      elem.style.cursor = '-webkit-' + cursor\n      elem.style.cursor = '-moz-' + cursor\n    }\n\n    elem.style.cursor = cursor\n  }\n\n  if (this.lastCoordinate_) {\n    this.previousCursor_ = elem.style.cursor\n    setCursor('grabbing', true)\n  } else if (\n    foundFeature &&\n    (\n      includes(this.features_.getArray(), foundFeature) ||\n      foundFeature === this.arrowFeature_\n    )\n  ) {\n    this.previousCursor_ = elem.style.cursor\n    setCursor('grab', true)\n  } else if (( foundFeature && foundFeature === this.anchorFeature_ ) || this.anchorMoving_) {\n    this.previousCursor_ = elem.style.cursor\n    setCursor('crosshair')\n  } else {\n    setCursor(this.previousCursor_ || '')\n    this.previousCursor_ = undefined\n  }\n}\n\n/**\n * @returns {StyleFunction}\n * @private\n */\nfunction getDefaultStyle () {\n  const white = [ 255, 255, 255, 0.8 ]\n  const blue = [ 0, 153, 255, 0.8 ]\n  const transparent = [ 255, 255, 255, 0.01 ]\n  const width = 2\n\n  const styles = {\n    [ ANCHOR_KEY ]: [\n      new Style({\n        image: new RegularShape({\n          fill: new Fill({\n            color: [ 0, 153, 255, 0.8 ]\n          }),\n          stroke: new Stroke({\n            color: blue,\n            width: 1\n          }),\n          radius: 4,\n          points: 6\n        }),\n        zIndex: Infinity\n      })\n    ],\n    [ ARROW_KEY ]: [\n      new Style({\n        fill: new Fill({\n          color: transparent\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width + 2\n        }),\n        text: new Text({\n          font: '12px sans-serif',\n          offsetX: 20,\n          offsetY: -20,\n          fill: new Fill({\n            color: 'blue'\n          }),\n          stroke: new Stroke({\n            color: white,\n            width: width + 1\n          })\n        }),\n        zIndex: Infinity\n      }),\n      new Style({\n        fill: new Fill({\n          color: transparent\n        }),\n        stroke: new Stroke({\n          color: blue,\n          width\n        }),\n        zIndex: Infinity\n      })\n    ]\n  }\n\n  return function (feature, resolution) {\n    let style\n    const angle = feature.get(ANGLE_PROP) || 0\n\n    switch (true) {\n      case feature.get(ANCHOR_KEY):\n        style = styles[ ANCHOR_KEY ]\n        style[ 0 ].getImage().setRotation(-angle)\n\n        return style\n      case feature.get(ARROW_KEY):\n        style = styles[ ARROW_KEY ]\n\n        const coordinates = feature.getGeometry().getCoordinates()\n        // generate arrow polygon\n        const geom = new Polygon([\n          [\n            [ coordinates[ 0 ], coordinates[ 1 ] - 6 * resolution ],\n            [ coordinates[ 0 ] + 8 * resolution, coordinates[ 1 ] - 12 * resolution ],\n            [ coordinates[ 0 ], coordinates[ 1 ] + 30 * resolution ],\n            [ coordinates[ 0 ] - 8 * resolution, coordinates[ 1 ] - 12 * resolution ],\n            [ coordinates[ 0 ], coordinates[ 1 ] - 6 * resolution ],\n          ]\n        ])\n\n        // and rotate it according to current angle\n        geom.rotate(angle, coordinates)\n        style[ 0 ].setGeometry(geom)\n        style[ 1 ].setGeometry(geom)\n        style[ 0 ].getText().setText(Math.round(-angle * 180 / Math.PI) + '°')\n\n        return style\n    }\n  }\n}\n\n/**\n * @param {ol.Collection<ol.Feature>|Array<ol.Feature>} features\n * @returns {ol.Extent | undefined}\n * @private\n */\nfunction getFeaturesExtent (features) {\n  features = features instanceof Collection ? features.getArray() : features\n  if (!features.length) return\n\n  return new GeometryCollection(features.map(feature => feature.getGeometry())).getExtent()\n}\n\n/**\n * @param {ol.Collection<ol.Feature> | Array<ol.Feature>} features\n * @return {ol.Coordinate | undefined}\n */\nfunction getFeaturesCentroid (features) {\n  features = features instanceof Collection ? features.getArray() : features\n  if (!features.length) return\n\n  return extentHelper.getCenter(getFeaturesExtent(features))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/rotate-feature-interaction.js","/**\n * @param {boolean} condition\n * @param {string} message\n * @throws Error\n */\nexport function assert (condition, message = '') {\n  message = [ 'Assertion failed', message ].join(': ')\n\n  if (!condition) {\n    throw new Error(message)\n  }\n}\n\n/**\n * @param {*} arg\n * @returns {*}\n */\nexport function identity (arg) {\n  return arg\n}\n\n/**\n * @param {...*} args\n * @return {*}\n */\nexport function coalesce (...args) {\n  return args.filter(value => value != null).shift()\n}\n\nconst counters = {}\n/**\n * @param {string} [prefix]\n * @return {number}\n */\nexport function uniqId (prefix = '') {\n  const ns = prefix || 'default'\n  counters[ ns ] = counters[ ns ] == null ? 0 : counters[ ns ]\n\n  return String(prefix) + (++counters[ ns ])\n}\n\nexport function includes (arr, value) {\n  return arr.indexOf(value) !== -1\n}\n\nexport function isArray (val) {\n  return val::Object.prototype.toString() === '[object Array]'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"ol\",\"amd\":\"openlayers\",\"commonjs\":\"openlayers\",\"commonjs2\":\"openlayers\"}\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}